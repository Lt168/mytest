# å¯¼å…¥streamlitåº“ï¼ˆç”¨äºæ„å»ºWebåº”ç”¨ï¼‰å’Œdatetimeåº“çš„dateç±»ï¼ˆå¤„ç†æ—¥æœŸï¼‰
import streamlit as st
from datetime import date

# ---------------------- é¡µé¢åŸºç¡€é…ç½® ----------------------
# è®¾ç½®é¡µé¢æ ‡é¢˜ã€å¸ƒå±€ï¼ˆå®½å±ï¼‰ã€ä¾§è¾¹æ é»˜è®¤æŠ˜å 
st.set_page_config(
    page_title="ä¸ªäººç®€å†ç”Ÿæˆå™¨",  # æµè§ˆå™¨æ ‡ç­¾é¡µæ ‡é¢˜
    layout="wide",  # é¡µé¢å¸ƒå±€ï¼šå®½å±æ¨¡å¼ï¼ˆé€‚é…å¤§å±ï¼‰
    initial_sidebar_state="collapsed"  # ä¾§è¾¹æ é»˜è®¤æŠ˜å 
)

# è‡ªå®šä¹‰CSSæ ·å¼ï¼ˆä»…éšè—é»˜è®¤å…ƒç´ ï¼Œæ— å…¶ä»–æ ·å¼ä¿®æ”¹ï¼‰
hide_st_style = """
    <style>
    #MainMenu {visibility: hidden;}  /* éšè—Streamlité»˜è®¤èœå•æ  */
    footer {visibility: hidden;}     /* éšè—Streamlité»˜è®¤é¡µè„š */
    header {visibility: hidden;}     /* éšè—Streamlité»˜è®¤å¤´éƒ¨ */
    /* ä»…ä¿ç•™åˆ†æ æ ‡é¢˜ä¸‹åˆ’çº¿æ ·å¼ï¼Œå¢å¼ºè§†è§‰åŒºåˆ† */
    .section-underline {
        border-bottom: 2px solid #4682B4;  /* ä¸‹åˆ’çº¿é¢œè‰²ï¼šé’¢è“è‰² */
        padding-bottom: 4px;               /* ä¸‹åˆ’çº¿ä¸æ–‡å­—é—´è· */
        margin-bottom: 15px;               /* æ ‡é¢˜ä¸ä¸‹æ–¹å†…å®¹é—´è· */
    }
    </style>
"""
# æ¸²æŸ“è‡ªå®šä¹‰CSSæ ·å¼
st.markdown(hide_st_style, unsafe_allow_html=True)

# ---------------------- é¡µé¢å¤´éƒ¨åŒºåŸŸï¼ˆæ ‡é¢˜æ ï¼‰ ----------------------
# æ„å»ºå¤´éƒ¨æ ‡é¢˜æ ï¼šå›¾æ ‡ + ä¸»æ ‡é¢˜ï¼ˆä½¿ç”¨HTMLè‡ªå®šä¹‰å¸ƒå±€ï¼‰
st.markdown(
    """
    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
        <div style="background: #FFD700; border-radius: 8px; padding: 5px 10px; color: #333; font-weight: bold;">ğŸ¨</div>
        <h1 style="margin: 0; font-size: 1.8rem;">ä¸ªäººç®€å†ç”Ÿæˆå™¨</h1>
    </div>
    """,
    unsafe_allow_html=True  # å…è®¸æ¸²æŸ“HTMLä»£ç 
)
# å¤´éƒ¨å‰¯æ ‡é¢˜ï¼ˆç°è‰²å°å­—ï¼Œå¢å¼ºè¯´æ˜ï¼‰
st.markdown("<p style='color: #666; margin-bottom: 20px;'>ä½¿ç”¨Streamlitåˆ›å»ºæ‚¨çš„ä¸ªæ€§åŒ–ç®€å†</p>", unsafe_allow_html=True)

# ---------------------- åˆ†æ æ ‡é¢˜ï¼ˆè¡¨å•/é¢„è§ˆåŒºæ ‡é¢˜ï¼‰ ----------------------
# åˆ›å»ºä¸¤åˆ—å¸ƒå±€ï¼šå·¦ä¾§è¡¨å•æ ‡é¢˜ã€å³ä¾§é¢„è§ˆæ ‡é¢˜
title_col1, title_col2 = st.columns([1, 2])  # åˆ—å®½æ¯”ä¾‹1:2
with title_col1:
    # è¡¨å•æ ‡é¢˜ï¼ˆå¸¦ä¸‹åˆ’çº¿æ ·å¼ï¼‰
    st.markdown("<h3 class='section-underline'>ä¸ªäººä¿¡æ¯è¡¨å•</h3>", unsafe_allow_html=True)
with title_col2:
    # é¢„è§ˆæ ‡é¢˜ï¼ˆå¸¦ä¸‹åˆ’çº¿æ ·å¼ï¼‰
    st.markdown("<h3 class='section-underline'>ç®€å†å®æ—¶é¢„è§ˆ</h3>", unsafe_allow_html=True)

# åˆ›å»ºå†…å®¹åˆ†æ ï¼šå·¦ä¾§è¡¨å•åŒºã€å³ä¾§é¢„è§ˆåŒºï¼ˆç´§å‡‘é—´è·ï¼‰
left_col, right_col = st.columns([1, 2], gap="small")  # åˆ—å®½1:2ï¼Œé—´è·smallï¼ˆç´§å‡‘ï¼‰

# ---------------------- å·¦ä¾§ï¼šä¸ªäººä¿¡æ¯è¡¨å•ï¼ˆç”¨æˆ·è¾“å…¥åŒºï¼‰ ----------------------
with left_col:
    # 1. æ ¸å¿ƒä¿¡æ¯ - å§“åè¾“å…¥æ¡†ï¼ˆé»˜è®¤ç©ºå€¼ï¼‰
    name = st.text_input("å§“å", value="")
    
    # 2. æ ¸å¿ƒä¿¡æ¯ - æ€§åˆ«å•é€‰æ¡†
    st.write("æ€§åˆ«")  # æ€§åˆ«æ ‡ç­¾
    # æ¨ªå‘å•é€‰æ¡†ï¼šä»…æ˜¾ç¤º"ç”·/å¥³"ï¼Œé»˜è®¤æ— é€‰ä¸­
    gender = st.radio("", ["ç”·", "å¥³"], horizontal=True)
    
    # 3. è”ç³»æ–¹å¼ - ç”µè¯è¾“å…¥æ¡†ï¼ˆé»˜è®¤ç©ºå€¼ï¼‰
    phone = st.text_input("ç”µè¯", value="")
    # 3. è”ç³»æ–¹å¼ - é‚®ç®±è¾“å…¥æ¡†ï¼ˆé»˜è®¤ç©ºå€¼ï¼‰
    email = st.text_input("é‚®ç®±", value="")
    # 3. è”ç³»æ–¹å¼ - å‡ºç”Ÿæ—¥æœŸé€‰æ‹©å™¨ï¼ˆé»˜è®¤ç©ºå€¼ï¼‰
    birthday = st.date_input("å‡ºç”Ÿæ—¥æœŸ", value=None)
    # 3. è”ç³»æ–¹å¼ - åœ°å€è¾“å…¥æ¡†ï¼ˆé»˜è®¤ç©ºå€¼ï¼‰
    address = st.text_input("åœ°å€", value="")
    
    # 4. æ•™è‚²èƒŒæ™¯ - å­¦å†+æ¯•ä¸šé™¢æ ¡ï¼ˆåˆ†æ ç´§å‡‘å¸ƒå±€ï¼‰
    edu_col1, edu_col2 = st.columns(2, gap="small")  # ä¸¤åˆ—ç­‰åˆ†ï¼Œç´§å‡‘é—´è·
    with edu_col1:
        # å­¦å†ä¸‹æ‹‰é€‰æ‹©æ¡†ï¼šé»˜è®¤ç©ºå€¼ï¼Œé€‰é¡¹åŒ…å«ä¸“ç§‘/æœ¬ç§‘/ç¡•å£«/åšå£«
        education = st.selectbox("å­¦å†", ["", "ä¸“ç§‘", "æœ¬ç§‘", "ç¡•å£«", "åšå£«"], index=0)
    with edu_col2:
        # æ¯•ä¸šé™¢æ ¡è¾“å…¥æ¡†ï¼ˆé»˜è®¤ç©ºå€¼ï¼‰
        school = st.text_input("æ¯•ä¸šé™¢æ ¡", value="")
    
    # 5. èƒ½åŠ›æ ‡ç­¾ - è¯­è¨€èƒ½åŠ›å¤šé€‰æ¡†ï¼ˆé»˜è®¤ç©ºï¼Œå ä½æç¤ºï¼‰
    lang = st.multiselect("è¯­è¨€èƒ½åŠ›", ["ä¸­æ–‡", "è‹±è¯­", "æ—¥è¯­", "å…¶ä»–"], default=[], placeholder="é€‰æ‹©è¯­è¨€")
    # 5. èƒ½åŠ›æ ‡ç­¾ - ä¸“ä¸šæŠ€èƒ½å¤šé€‰æ¡†ï¼ˆé»˜è®¤ç©ºï¼Œå ä½æç¤ºï¼‰
    skills = st.multiselect("æŠ€èƒ½ï¼ˆå¯å¤šé€‰ï¼‰", ["Java", "HTML/CSS", "æœºå™¨å­¦ä¹ ", "Python"], 
                           default=[], placeholder="é€‰æ‹©æŠ€èƒ½")
    
    # 6. å·¥ä½œç›¸å…³ - å·¥ä½œç»éªŒæ»‘å—ï¼ˆèŒƒå›´0-30å¹´ï¼Œé»˜è®¤0å¹´ï¼‰
    work_exp = st.slider("å·¥ä½œç»éªŒï¼ˆå¹´ï¼‰", 0, 30, 0)
    # 6. å·¥ä½œç›¸å…³ - æœŸæœ›è–ªèµ„èŒƒå›´è¯´æ˜æ–‡å­—
    st.write("æœŸæœ›è–ªèµ„èŒƒå›´ï¼ˆå…ƒï¼‰")
    # 6. å·¥ä½œç›¸å…³ - è–ªèµ„èŒƒå›´æ»‘å—ï¼ˆéšè—æ ‡ç­¾ï¼Œé»˜è®¤10000-20000å…ƒï¼‰
    salary_min, salary_max = st.slider("", 5000, 50000, (10000, 20000), label_visibility="collapsed")
    # 6. å·¥ä½œç›¸å…³ - æœ€ä½³è”ç³»æ—¶é—´ä¸‹æ‹‰æ¡†ï¼ˆé»˜è®¤ç©ºå€¼ï¼‰
    commute_time = st.selectbox("æ¯æ—¥æœ€ä½³è”ç³»æ—¶é—´æ®µ", ["", "09:00", "å…¶ä»–æ—¶æ®µ"], index=0)
    
    # 7. ç»å†æ¨¡å— - å®ä¹ ç»å†æ–‡æœ¬æ¡†ï¼ˆé«˜åº¦60pxï¼Œé»˜è®¤ç©ºå€¼ï¼‰
    intern_exp = st.text_area("å®ä¹ ç»å†", height=60, value="")
    # 7. ç»å†æ¨¡å— - å·¥ä½œç»å†æ–‡æœ¬æ¡†ï¼ˆé«˜åº¦60pxï¼Œé»˜è®¤ç©ºå€¼ï¼‰
    work_exp_detail = st.text_area("å·¥ä½œç»å†", height=60, value="")
    # 7. ç»å†æ¨¡å— - ä¸ªäººç®€ä»‹æ–‡æœ¬æ¡†ï¼ˆé«˜åº¦60pxï¼Œé»˜è®¤ç©ºå€¼ï¼‰
    intro = st.text_area("ä¸ªäººç®€ä»‹", height=60, value="")
    
    # 8. å¤´åƒä¸Šä¼  - æ ‡ç­¾è¯´æ˜
    st.write("ä¸Šä¼ å¤´åƒ")
    # 8. å¤´åƒä¸Šä¼  - æ–‡ä»¶ä¸Šä¼ å™¨ï¼ˆéšè—æ ‡ç­¾ï¼Œä»…æ”¯æŒjpg/jpeg/pngæ ¼å¼ï¼‰
    avatar_img = st.file_uploader("", type=["jpg", "jpeg", "png"], label_visibility="collapsed")

# ---------------------- å³ä¾§ï¼šç®€å†å®æ—¶é¢„è§ˆï¼ˆå†…å®¹å±•ç¤ºåŒºï¼‰ ----------------------
with right_col:
    # åˆ›å»ºå¸¦è¾¹æ¡†çš„å®¹å™¨ï¼ŒåŒ…è£¹é¢„è§ˆå†…å®¹ï¼ˆå¢å¼ºè§†è§‰åŒºåˆ†ï¼‰
    preview_container = st.container(border=True)
    with preview_container:
        # 1. é¢„è§ˆå¤´éƒ¨ - å¤´åƒ + å§“åå¸ƒå±€ï¼ˆæ¯”ä¾‹0.2:1ï¼‰
        avatar_col, name_col = st.columns([0.2, 1])
        with avatar_col:
            # å¤´åƒå±•ç¤ºé€»è¾‘ï¼šæœ‰ä¸Šä¼ åˆ™æ˜¾ç¤ºå›¾ç‰‡ï¼Œæ— åˆ™æ˜¾ç¤ºå ä½ç¬¦
            if avatar_img:
                st.image(avatar_img, width=80)  # å¤´åƒå®½åº¦80pxï¼Œé€‚é…å¸ƒå±€
            else:
                st.write("ğŸ‘¤ å¤´åƒå ä½")  # æ— å¤´åƒæ—¶çš„å ä½æç¤º
        with name_col:
            # å§“åå±•ç¤ºï¼šæœ‰è¾“å…¥åˆ™æ˜¾ç¤ºå§“åï¼Œæ— åˆ™æ˜¾ç¤º"å§“å"ï¼ˆä¸‰çº§æ ‡é¢˜æ ·å¼ï¼‰
            st.write(f"### {name if name else 'å§“å'}")
        
        # 2. åŸºç¡€ä¿¡æ¯åˆ†æ å±•ç¤ºï¼ˆæ¯”ä¾‹1:1ï¼Œç´§å‡‘é—´è·ï¼‰
        info_col1, info_col2 = st.columns(2, gap="small")
        with info_col1:
            # å·¦åˆ—ä¿¡æ¯ï¼šæ€§åˆ«/ç”µè¯/é‚®ç®±/å‡ºç”Ÿæ—¥æœŸ/æ¯•ä¸šé™¢æ ¡
            st.write(f"æ€§åˆ«: {gender}")
            st.write(f"ç”µè¯: {phone}")
            st.write(f"é‚®ç®±: {email}")
            # å‡ºç”Ÿæ—¥æœŸæ ¼å¼åŒ–ï¼šæœ‰é€‰æ‹©åˆ™æ˜¾ç¤ºYYYY-MM-DDï¼Œæ— åˆ™æ˜¾ç¤ºç©º
            st.write(f"å‡ºç”Ÿæ—¥æœŸ: {birthday.strftime('%Y/%m/%d') if birthday else ''}")
            st.write(f"æ¯•ä¸šé™¢æ ¡: {school}")
        with info_col2:
            # å³åˆ—ä¿¡æ¯ï¼šå­¦å†/åœ°å€/å·¥ä½œç»éªŒ/æœŸæœ›è–ªèµ„/è”ç³»æ—¶é—´/è¯­è¨€èƒ½åŠ›
            st.write(f"å­¦å†: {education}")
            st.write(f"åœ°å€: {address}")
            st.write(f"å·¥ä½œç»éªŒ: {work_exp}å¹´")
            st.write(f"æœŸæœ›è–ªèµ„: {salary_min}-{salary_max}å…ƒ")
            st.write(f"æœ€ä½³è”ç³»æ—¶é—´: {commute_time}")
            # è¯­è¨€èƒ½åŠ›æ‹¼æ¥ï¼šæœ‰é€‰æ‹©åˆ™ç”¨é€—å·åˆ†éš”ï¼Œæ— åˆ™æ˜¾ç¤º"æœªå¡«å†™"
            st.write(f"è¯­è¨€èƒ½åŠ›: {', '.join(lang) if lang else 'æœªå¡«å†™'}")
        
        # åˆ†éš”çº¿ï¼šåŒºåˆ†åŸºç¡€ä¿¡æ¯å’Œå…¶ä»–æ¨¡å—
        st.markdown("---")
        
        # 3. ä¸“ä¸šæŠ€èƒ½æ¨¡å—ï¼ˆå››çº§æ ‡é¢˜æ ·å¼ï¼‰
        st.write("#### ä¸“ä¸šæŠ€èƒ½")
        # æŠ€èƒ½æ‹¼æ¥ï¼šæœ‰é€‰æ‹©åˆ™ç”¨é€—å·åˆ†éš”ï¼Œæ— åˆ™æ˜¾ç¤º"æœªå¡«å†™"
        st.write(", ".join(skills) if skills else "æœªå¡«å†™")
        
        # 4. å®ä¹ ç»å†æ¨¡å—ï¼ˆå››çº§æ ‡é¢˜æ ·å¼ï¼‰
        st.write("#### å®ä¹ ç»å†")
        # å®ä¹ ç»å†å±•ç¤ºï¼šæœ‰è¾“å…¥åˆ™æ˜¾ç¤ºå†…å®¹ï¼Œæ— åˆ™æ˜¾ç¤º"æš‚æ— å®ä¹ ç»å†"
        st.write(intern_exp if intern_exp else "æš‚æ— å®ä¹ ç»å†")
        
        # 5. å·¥ä½œç»å†æ¨¡å—ï¼ˆå››çº§æ ‡é¢˜æ ·å¼ï¼‰
        st.write("#### å·¥ä½œç»å†")
        # å·¥ä½œç»å†å±•ç¤ºï¼šæœ‰è¾“å…¥åˆ™æ˜¾ç¤ºå†…å®¹ï¼Œæ— åˆ™æ˜¾ç¤º"æš‚æ— å·¥ä½œç»å†"
        st.write(work_exp_detail if work_exp_detail else "æš‚æ— å·¥ä½œç»å†")
        
        # åˆ†éš”çº¿ï¼šåŒºåˆ†ç»å†æ¨¡å—å’Œä¸ªäººç®€ä»‹
        st.markdown("---")
        
        # 6. ä¸ªäººç®€ä»‹æ¨¡å—ï¼ˆå››çº§æ ‡é¢˜æ ·å¼ï¼‰
        st.write("#### ä¸ªäººç®€ä»‹")
        # ä¸ªäººç®€ä»‹å±•ç¤ºï¼šæœ‰è¾“å…¥åˆ™æ˜¾ç¤ºå†…å®¹ï¼Œæ— åˆ™æ˜¾ç¤ºé»˜è®¤æç¤ºè¯­
        st.write(intro if intro else "è¿™ä¸ªäººå¾ˆç¥ç§˜ï¼Œæ²¡æœ‰ç•™ä¸‹ä»»ä½•ä»‹ç»...")
